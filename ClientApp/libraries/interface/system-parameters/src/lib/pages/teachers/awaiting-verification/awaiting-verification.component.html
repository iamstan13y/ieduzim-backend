<div class="p-4">
    <nz-table *ngIf="teachers" #dataTable [nzData]="teachers.data" [(nzPageIndex)]="index"
        (nzPageIndexChange)="getTeachers($event)" [nzFrontPagination]="false" [nzPageSize]="teachers.pageSize"
        [nzTotal]="teachers.totalItems">
        <thead>
            <tr>
                <th></th>
                <th>Name</th>
                <th>Gender</th>
                <th>Phone Number</th>
                <th>Email</th>
                <th>Verified</th>
                <th>Subscribed</th>
                <th>Documents</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let data of dataTable.data">
                <td>
                    <nz-avatar nzIcon="user" style="cursor: pointer;"
                        (click)="toggleModal(true,data.profilePicture ? data.profilePicture: 'https://i.ibb.co/Rc7Wfg1/teacher.png')"
                        [nzSrc]="data.profilePicture ? data.profilePicture : 'https://i.ibb.co/Rc7Wfg1/teacher.png'">
                    </nz-avatar>
                <td>{{data.title.name}} {{data.name}} {{data.surname}}</td>
                <td>
                    {{data.gender}}
                </td>
                <td>{{data.user.phoneNumber}}</td>
                <td>{{data.user.email}}</td>
                <td style="text-align: center;">
                    <nz-switch [(ngModel)]="data.verified" (ngModelChange)="save(data)" nz-tooltip
                        [nzTooltipTitle]="data.verified? 'Revoke Verification' : 'Verify Teacher'"></nz-switch>
                </td>
                <td style="text-align: center;">
                    <i nz-icon nzType="check-circle" style="color: darkgreen" nzTheme="outline"></i>
                </td>
                <td style="color:darkgreen; cursor: pointer;" class="text-right">
                    <span (click)="toggleDrawer(true, data)"> <i nz-icon nzType="eye" color="darkgreen"
                            nzTheme="outline"></i> View Qualifications</span>
                </td>
            </tr>
        </tbody>
    </nz-table>
</div>
<nz-drawer *ngIf="visible" [nzClosable]="true" [nzVisible]="visible" [nzTitle]="'Documents'"
    (nzOnClose)="toggleDrawer(false)" nzWidth="30%">
    <b>Qualification Description: </b> {{teacher ? teacher.qualificationDescription : ''}}
    <div *ngFor="let dox of activeDocuments">
        <br/><br/><br/>
        <h3 style="color: darkgreen">{{dox.qualificationDocuments.name}}</h3>
        <div nz-row>
            <div nz-col nzSpan="8">
                <img nz-image [src]="dox.fileUrl" alt="" height="150px" width="100px" (click)="toggleDocumentModal(true, dox.fileUrl)">
            </div>
            <div  nz-col nzSpan="16">
                {{dox.description}}<br />
                <nz-switch [(ngModel)]="dox.authenticated"  nz-popconfirm nzPopconfirmTitle="Are you sure you want to mark this document as Authentic?" nzPopconfirmPlacement="right"
                (nzOnConfirm)="authenticate(dox)" (nzOnCancel)="toggleDrawer(false)" nz-tooltip
                    [nzTooltipTitle]="dox.authenticated? 'Revoke Authentication' : 'Authenticate'"></nz-switch>
            </div>
        </div>
    </div>
</nz-drawer>

<nz-modal *ngIf="documentVisible" [(nzVisible)]="documentVisible" (nzOnCancel)="toggleDocumentModal(false, null)" [nzFooter]="null">
    <img nz-image width="100%" [src]="url" alt="" />
</nz-modal>

<nz-modal *ngIf="modalVisible" [(nzVisible)]="modalVisible" (nzOnCancel)="toggleModal(false, null)" [nzFooter]="null">
    <img nz-image width="200px" height="200px" [src]="modalData" alt="" />
</nz-modal>