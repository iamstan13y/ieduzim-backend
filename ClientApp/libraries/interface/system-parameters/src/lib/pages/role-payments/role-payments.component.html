
<div class="p-4">
    <h2 class="text-center">
      Role Payment Periods
    </h2>
    <div class="text-right">
        <button nz-button nzType="primary" (click)="toggleDrawer(true)">Add New</button>
    </div><br/>
    <nz-table *ngIf="rolePayments" #dataTable [nzData]="rolePayments.data" [(nzPageIndex)]="index" (nzPageIndexChange)="getRolePaymentPeriods($event)"
    [nzFrontPagination]="false" [nzPageSize]="rolePayments.pageSize"
    [nzTotal]="rolePayments.totalItems">
        <thead>
          <tr>
            <th>Role</th>
            <th>Payment Period</th>
            <th>Payment Description</th>
            <th>Total Amount</th>
            <th>Status</th>
            <th style="width: 15%"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of dataTable.data">
            <td>{{data.role.name }}</td>
            <td>
              {{data.paymentPeriod.name}}
            </td>
            <td>
              {{data.paymentDescription}}
            </td>
            <td>{{data.role.name == 'Teacher' ? data.currency + ' ' + data.totalAmount : 'Student Amounts set per subject under levels/subjects'}}</td>
            <td>
              <nz-switch [(ngModel)]="data.active" (ngModelChange)="changeStatus($event, data)" nz-tooltip
              [nzTooltipTitle]="data.active ? 'Deactivate' : 'Activate'"></nz-switch>
            </td>
            <td style="width: 15%;" class="text-right">
              <nz-button-group>
              <button nz-button nzType="primary" [nzSize]="'small'" (click)="edit(data)">
                <i nz-icon nzType="edit"></i>
              </button>
              <button nz-button nzType="danger" [nzSize]="'small'" nzGhost
                nz-popconfirm nzPopconfirmTitle="Delete {{ data.name }}" nzPopconfirmPlacement="right"  nz-tooltip [nzTooltipTitle]="'Delete'"
                        (nzOnConfirm)="delete(data)" (nzOnCancel)="toggleDrawer(false)">
                <i nz-icon nzType="delete"></i>
              </button>
              </nz-button-group>
            </td>
          </tr>
        </tbody>
      </nz-table>
      </div>
      <nz-drawer [nzClosable]="true" [nzVisible]="visible"
       [nzTitle]="rolePayment ? 'Update Role Payment Period': 'Add Role Payment Period'" (nzOnClose)="toggleDrawer(false)"  nzWidth="30%">
            <app-form *ngIf="form" [form]="form"></app-form>
      </nz-drawer>